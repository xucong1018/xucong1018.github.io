# è¯„ä»·æŒ‡æ ‡

# åˆ†ç±»

[åˆ†ç±»é—®é¢˜çš„è¯„ä¼°æŒ‡æ ‡ä¸€è§ˆ](https://zhuanlan.zhihu.com/p/69101372)

- TPï¼š True Positivesï¼Œ è¡¨ç¤º**å®é™…ä¸ºæ­£ä¾‹**ä¸”è¢«åˆ†ç±»å™¨**åˆ¤å®šä¸ºæ­£ä¾‹**çš„æ ·æœ¬æ•°
- FPï¼š False Positivesï¼Œ è¡¨ç¤º**å®é™…ä¸ºè´Ÿä¾‹**ä¸”è¢«åˆ†ç±»å™¨**åˆ¤å®šä¸ºæ­£ä¾‹**çš„æ ·æœ¬æ•°
- FNï¼š False Negativesï¼Œ è¡¨ç¤º**å®é™…ä¸ºæ­£ä¾‹**ä½†è¢«åˆ†ç±»å™¨**åˆ¤å®šä¸ºè´Ÿä¾‹**çš„æ ·æœ¬æ•°
- TNï¼š True Negativesï¼Œ è¡¨ç¤º**å®é™…ä¸ºè´Ÿä¾‹**ä¸”è¢«åˆ†ç±»å™¨**åˆ¤å®šä¸ºè´Ÿä¾‹**çš„æ ·æœ¬æ•°

---

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%201.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%202.png?raw=true)

---

## F1

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%203.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%204.png?raw=true)

### **Macro F1**

**Macro ç®—æ³•åœ¨è®¡ç®— Precision ä¸ Recall æ—¶æ˜¯å…ˆåˆ†åˆ«è®¡ç®—æ¯ä¸ªç±»åˆ«çš„Precision ä¸ Recall**ï¼Œ ç„¶åå†è¿›è¡Œå¹³å‡ã€‚

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%205.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%206.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%207.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%208.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%209.png?raw=true)

### **Micro**

**Micro ç®—æ³•è®¡ç®—å…¨å±€çš„ Precision ä¸ Recall ã€‚**

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%2010.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%2011.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%2012.png?raw=true)

- **Macro ç›¸å¯¹ Micro è€Œè¨€ï¼Œå°ç±»åˆ«èµ·åˆ°çš„ä½œç”¨æ›´å¤§ï¼Œ**
- **Macroå•çº¯çš„å¹³å‡å¿½ç•¥äº†æ ·æœ¬ä¹‹é—´åˆ†å¸ƒå¯èƒ½å­˜åœ¨æå¤§ä¸å¹³è¡¡çš„æƒ…å†µ**
- å¦‚æœ Micro << Macro ï¼Œ åˆ™æ„å‘³ç€åœ¨å¤§æ ·æœ¬ç±»åˆ«ä¸­å‡ºç°äº†ä¸¥é‡çš„åˆ†ç±»é”™è¯¯ï¼› å¦‚æœ Macro << Micro ï¼Œ åˆ™æ„å‘³ç€å°æ ·æœ¬ç±»åˆ«ä¸­å‡ºç°äº†ä¸¥é‡çš„åˆ†ç±»é”™è¯¯ã€‚

---

## MCC

MCC ä¸»è¦ç”¨äºè¡¡é‡äºŒåˆ†ç±»é—®é¢˜ï¼Œå…¶ç»¼åˆè€ƒè™‘äº† TP TN, FP , FNï¼Œ **æ˜¯ä¸€ä¸ªæ¯”è¾ƒå‡è¡¡çš„æŒ‡æ ‡ï¼Œ å¯¹äºæ ·æœ¬ä¸å‡è¡¡æƒ…å†µä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨**ã€‚MCCçš„å–å€¼èŒƒå›´åœ¨Â **[-1, 1]**ï¼Œ å–å€¼ä¸º1 è¡¨ç¤ºé¢„æµ‹ä¸å®é™…å®Œå…¨ä¸€è‡´ï¼Œ

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%2013.png?raw=true)

---

## AUC

[æœºå™¨å­¦ä¹ ç¯‡-æŒ‡æ ‡:AUC_èœé¸Ÿæ•™ç¨‹*...*çš„åšå®¢-CSDNåšå®¢_aucæŒ‡æ ‡](https://blog.csdn.net/fanfangyu/article/details/122885441?raw=true)

### **ROCæ›²çº¿ï¼ˆå—è¯•è€…å·¥ä½œç‰¹å¾ï¼‰**

åœ¨åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œå¾€å¾€ä¼šé‡‡å–ä¸€ä¸ªé˜ˆå€¼ï¼Œå¤§äºè¯¥é˜ˆå€¼çš„ä¸ºæ­£ä¾‹ï¼Œ å°äºè¯¥é˜ˆå€¼çš„ä¸ºè´Ÿä¾‹ã€‚ å¦‚æœæˆ‘ä»¬å‡å°è¿™ä¸ªé˜ˆå€¼ï¼Œ é‚£ä¹ˆä¼šæœ‰æ›´å¤šçš„æ ·æœ¬è¢«è¯†åˆ«ä¸ºæ­£ç±»ï¼Œè¿™ä¼šæé«˜æ­£ç±»çš„è¯†åˆ«ç‡ï¼Œä½†åŒæ—¶ä¼šé™ä½è´Ÿç±»çš„è¯†åˆ«ç‡ã€‚

ä¸ºäº†å½¢è±¡çš„æè¿°ä¸Šè¿°çš„è¿™ç§å˜åŒ–ï¼Œ å¼•å…¥ROCæ›²çº¿æ¥è¯„ä»·ä¸€ä¸ªåˆ†ç±»å™¨çš„å¥½åã€‚ ROC æ›²çº¿ä¸»è¦å…³æ³¨ä¸¤ä¸ªæŒ‡æ ‡ï¼š

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%2014.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%2015.png?raw=true)

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%2016.png?raw=true)

### ****æ›²çº¿ä¸‹é¢ç§¯ï¼ˆAUCï¼‰****

**éšæœºæŠ½å–ä¸€ä¸ªé˜³æ€§æ ·æœ¬å’Œä¸€ä¸ªé˜´æ€§æ ·ï¼ŒP1ä¸ºå°†æ­£æ ·æœ¬é¢„æµ‹ä¸ºæ­£æ ·æœ¬æ¦‚ç‡ï¼ŒP2ä¸ºå°†è´Ÿæ ·æœ¬é¢„æµ‹ä¸ºæ­£æ ·æœ¬æ¦‚ç‡ï¼ŒAUCä¸ºP1>P2çš„æ¦‚ç‡ã€‚**

ğŸ’¡ **è®¡ç®—**

> å¯¹ä¸€æ‰¹å·²çŸ¥æ­£è´Ÿçš„æ ·æœ¬é›†åˆè¿›è¡Œåˆ†ç±»ï¼ŒæŒ‰ç…§é¢„æµ‹æ¦‚ç‡**ä»ä½åˆ°é«˜è¿›è¡Œæ’åº**ï¼Œ
> 

> å¯¹äºæ­£æ ·æœ¬ä¸­æ¦‚ç‡æœ€é«˜çš„ï¼Œæ’åºä¸ºrank_1ï¼Œæ¯”å®ƒæ¦‚ç‡å°çš„æœ‰M-1ä¸ªæ­£æ ·æœ¬ï¼ˆMä¸ºæ­£æ ·æœ¬ä¸ªæ•°ï¼‰ï¼Œï¼ˆranl_1-Mï¼‰ä¸ªè´Ÿæ ·æœ¬ã€‚
æ­£æ ·æœ¬ä¸­æ¦‚ç‡ç¬¬äºŒé«˜çš„ï¼Œæ’åºä¸ºrank_2ï¼Œæ¯”å®ƒæ¦‚ç‡å°çš„æœ‰M-2ä¸ªæ­£æ ·æœ¬ï¼Œï¼ˆrank_2-(M-1)ï¼‰ä¸ªè´Ÿæ ·æœ¬ï¼Œ
ä»¥æ­¤ç±»æ¨ï¼Œæ­£æ ·æœ¬ä¸­æ¦‚ç‡æœ€å°çš„ï¼Œæ’åºä¸ºrank_Mï¼Œæ¯”å®ƒæ¦‚ç‡å°çš„æœ‰0ä¸ªæ­£æ ·æœ¬ï¼Œ(rank_M-1)ä¸ªè´Ÿæ ·æœ¬ã€‚
> 

> æ€»å…±æœ‰M*Nä¸ªæ­£è´Ÿæ ·æœ¬å¯¹ï¼ŒæŠŠæ‰€æœ‰æ¯”è¾ƒä¸­æ­£æ ·æœ¬æ¦‚ç‡å¤§äºè´Ÿæ ·æœ¬æ¦‚ç‡çš„ä¾‹å­éƒ½ç®—ä¸Šï¼Œ*
> 

$$
\left(\operatorname{rank}_{1}-M+\operatorname{rank}_{2}-(M-1)+\ldots+\operatorname{rank}_{M}-1\right) /(M * N)\\AUC=\frac{\sum_{\mathrm{i} \in \text { positive }} \operatorname{rank}_{i}-\frac{M(1+M)}{2}}{M \times N}
$$


**ä¼˜ç‚¹ï¼š**

- AUCåæ˜ çš„æ˜¯åˆ†ç±»å™¨å¯¹æ ·æœ¬çš„**æ’åºèƒ½åŠ›**ï¼Œé€‚åˆæ’åºé—®é¢˜
- AUCå¯¹**æ ·æœ¬ç±»åˆ«å‡è¡¡**å¹¶ä¸æ•æ„Ÿ
- AUCä¸éœ€è¦**â¼¿åŠ¨è®¾å®šé˜ˆå€¼**ï¼Œæ˜¯â¼€ç§æ•´ä½“ä¸Šçš„è¡¡é‡â½…æ³•ã€‚

**ç¼ºç‚¹ï¼š**

- å¿½ç•¥é¢„æµ‹æ¦‚ç‡å’Œæ¨¡å‹çš„**æ‹Ÿåˆä¼˜åº¦**
- **ä¿¡æ¯ç¬¼ç»Ÿ**ï¼Œä¸èƒ½åæ˜ å¬å›ç‡ã€ç²¾ç¡®ç‡ç­‰å®é™…ä¸šåŠ¡ä¸­å…³â¼¼çš„æŒ‡æ ‡
- **ç±»åˆ«å†…éƒ¨æ²¡æœ‰æ¯”è¾ƒ**ï¼Œâ½†æ³•è¡¡é‡æ ·æœ¬å¯¹äºåˆ†ç±»å¥½åç¨‹åº¦çš„åˆ»ç”»èƒ½â¼’

---

## PRæ›²çº¿

P-R æ›²çº¿å…¶æ¨ªåæ ‡ä¸º Recallï¼Œ çºµåæ ‡ä¸º Precisionï¼Œ å…¶èƒ½å¸®åŠ©æˆ‘ä»¬å¾ˆå¥½çš„åšå‡ºæƒè¡¡

![Aè¦†ç›–Cï¼ŒAä¼˜äºC](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%2017.png?raw=true)

Aè¦†ç›–Cï¼ŒAä¼˜äºC

P-Ræ›²çº¿è‚¯å®šä¼šç»è¿‡ï¼ˆ0,0ï¼‰ç‚¹ï¼ˆ**ä¸yè½´é‡åˆ**ï¼‰ï¼Œæ‰€æœ‰çš„æ ·æœ¬å…¨éƒ¨åˆ¤ä¸ºè´Ÿä¾‹

---

## G-mean

G-mean = Precision1*Precision0ï¼Œè¯„ä¼°ä¸å¹³è¡¡æ•°æ®é›†ã€‚

![Untitled](https://github.com/xucong1018/xucong1018.github.io/blob/master/img/è¯„ä»·æŒ‡æ ‡/Untitled%2018.png?raw=true)

---

# æ¨èç³»ç»Ÿ****ç¦»çº¿è¯„ä¼°æŒ‡æ ‡****

## ****è¯„åˆ†é¢„æµ‹æŒ‡æ ‡****

ç¬¦å·å®šä¹‰ï¼šå¯¹äºæµ‹è¯•é›†ä¸­çš„ä¸€ä¸ªç”¨æˆ·$u$å’Œç‰©å“$i$ï¼Œä»¤$r_{ui}$æ˜¯ç”¨æˆ·$u$å¯¹ç‰©å“$i$çš„å®é™…è¯„åˆ†ï¼Œè€Œ$\hat{r}_{ui}$æ˜¯æ¨èç®—æ³•ç»™å‡ºçš„é¢„æµ‹è¯„åˆ†ã€‚

- **å‡æ–¹æ ¹è¯¯å·®(Root Mean Squared Errorï¼ŒRMSE)**

$$
\operatorname{RMSE}=\frac{\sqrt{\sum_{u, i \in T}\left(r_{u i}-\hat{r}_{u i}\right)^{2}}}{|T|}
$$

- ****å¹³å‡ç»å¯¹è¯¯å·®(Mean Absolute Errorï¼ŒMAE)****

$$
\mathrm{MAE}=\frac{\sum_{u, i \in T}\left|r_{u i}-\hat{r}_{u i}\right|}{|T|}
$$

## ****TopNæ¨è****

ç¬¦å·å®šä¹‰ï¼šç”¨æˆ·é›†åˆä¸º$U$ï¼Œç‰©å“åˆ—è¡¨$I$ï¼Œ$R(u)$ä»£è¡¨æ ¹æ®ç”¨æˆ·åœ¨è®­ç»ƒé›†ä¸Šçš„è¡Œä¸ºç»™ç”¨æˆ·åšå‡ºçš„æ¨èåˆ—è¡¨ï¼Œ$T(u)$ä»£è¡¨ç”¨æˆ·åœ¨æµ‹è¯•é›†ä¸Šçš„è¡Œä¸ºåˆ—è¡¨ã€‚

- ****ç²¾ç¡®åº¦(Precision)ï¼š****å³æ¨èå‡†ç¡®çš„æ•°é‡ï¼Œé™¤ä»¥æ¨èåˆ—è¡¨çš„æ€»æ•°ï¼Œé€šä¿—è®²å°±æ˜¯æ¨èçš„å‡†ç¡®ç‡ã€‚

$$
\text { Precision }=\frac{\sum_{u \in U}|R(u) \cap T(u)|}{\sum_{u \in U}|R(u)|}
$$

- ****å¬å›ç‡(Recall)ï¼š****å‡†ç¡®æ¨èçš„æ•°ç›®ä¸ç”¨æˆ·çš„è¡Œä¸ºæ€»æ•°ç›®çš„æ¯”å€¼ï¼Œä¸€å®šç¨‹åº¦ä¸Šè¡¨ç¤ºäº†å¯¹æ¨èæ½œåŠ›çš„æŒ–æ˜ç¨‹åº¦ã€‚

$$
\text { Recall }=\frac{\sum_{u \in U}|R(u) \cap T(u)|}{\sum_{u \in U}|T(u)|}
$$

- **Hit Ratio(HR)ï¼š**åœ¨top-Kæ¨èä¸­ï¼ŒHRæ˜¯ä¸€ç§å¸¸ç”¨çš„è¡¡é‡å¬å›ç‡çš„æŒ‡æ ‡

$$
HR@K=\frac{NumberOfHits@K}{GT}
$$

- **è¦†ç›–ç‡(Coverage)ï¼š**è¦†ç›–ç‡è¡¨ç¤ºæ¨èç³»ç»Ÿèƒ½å¤Ÿæ¨èå‡ºæ¥çš„ç‰©å“å æ€»ç‰©å“é›†åˆçš„æ¯”ä¾‹ï¼Œå®ƒæè¿°ä¸€ä¸ªæ¨èç³»ç»Ÿå¯¹ç‰©å“**é•¿å°¾**çš„å‘æ˜èƒ½åŠ›ï¼ˆ**ä¸å¿½ç•¥å†·é—¨å•†å“**ï¼‰ã€‚

$$
\text { Coverage }=\frac{\left|\bigcup_{\mathrm{u} \in \mathrm{U}} \mathrm{R}(\mathrm{u})\right|} {|I|}
$$

- **å¤šæ ·æ€§ï¼š**å‡è®¾$s(i,j)âˆˆ[0,1]$å®šä¹‰äº†ç‰©å“$i$å’Œ$j$ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œ

$$
\begin{aligned}Diversity(u)&=1-\frac{\sum_{i, j \in R(u)} s(i, j)}{\frac{1}{2} \mid R(u)(|R(u)|-1)} \quad  \\Diversity &=\frac{1}{|U|} \sum_{u \in U} \operatorname{Diversity}(u)\end{aligned}
$$